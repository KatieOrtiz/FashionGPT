<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
    <title>Dashboard</title>
</head>
<body class="single-section-page">
    <header class="header">
      <div class="container">
        <nav class="navbar">
          <h1>FashionGPT</h1>
          <ul>
            <li></li>
            <span id="homebutton"><i class="fas fa-house"></i></span>
            <span id="likebutton"><i class="fas fa-heart"></i></span>
            <span id="settingbutton"><i class="fas fa-gear"></i></span>
          </ul>
        </nav>
      </div>
    </header>
    <div class="container">
    <div id="output-section"></div>
    {% for suggestion_id, products in suggestion_products.items() %}
    <div class="user-suggestion">
        <h2>User Suggestion #{{ loop.index }}</h2>
        <!-- Display products for this suggestion -->
        <div class="suggested-products">
            {% for product in products %}
            <div class="clothing-item-tile">
                <!-- Display product image -->
                <img class="product-image" src="{{ product.image }}" alt="Product Image" style="max-width: 200px; max-height: 200px;">
                <h3>{{ product.name }}</h3>
                <p>Price: {{ product.price }}</p>
                <!-- Add more details if needed -->
                <a href="{{ product.link }}">View Product</a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
    <script src="script.js"></script>  
    <script>
      // Script to fetch and display data from the server
      document
        .getElementById("submit-filters")
        .addEventListener("click", function (event) {
          event.preventDefault(); // Prevent default form submission
          var formData = new FormData(document.getElementById("filters-form"));

          fetch("/pref", {
            method: "POST",
            body: formData,
          })
            .then((response) => response.json())
            .then((data) => {
              const outputDiv = document.getElementById("output-section");
              outputDiv.innerHTML = ""; // Clear previous content
              // Dynamically create content based on data received
              data.forEach((choice, index) => {
                let choiceDiv = document.createElement("div");
                choiceDiv.innerHTML = `<h3>Choice ${index + 1}</h3>`;
                Object.keys(choice).forEach((key) => {
                  let itemDiv = document.createElement("div");
                  itemDiv.textContent = `${key}: ${choice[key].join(" - ")}`;
                  choiceDiv.appendChild(itemDiv);
                });
                outputDiv.appendChild(choiceDiv);
              });
            })
            .catch((error) => console.error("Error:", error));
        });
    </script>
  </body>
</html>